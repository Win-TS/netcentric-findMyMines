{"ast":null,"code":"var _jsxFileName = \"/Users/win_thanatpong/Desktop/FindMyMines/frontend/src/pages/MainMenu.js\";\nimport React, { Component } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport InputForm from '../components/InputForm';\nimport Choice from '../components/Choice';\nimport Loading from '../components/Loading';\nimport Error from '../components/Error';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ENDPOINT = 'http://localhost:9000/';\nclass MainMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.componentDidMount = () => {\n      this.socket = io(ENDPOINT);\n      this.socket.on('newGameCreated', ({\n        room,\n        difficulty\n      }) => {\n        this.setState({\n          serverConfirmed: true,\n          room: room\n        });\n      });\n      this.socket.on('joinConfirmed', () => {\n        this.setState({\n          serverConfirmed: true\n        });\n      });\n      this.socket.on('errorMessage', message => this.displayError(message));\n    };\n    this.onChoice = choice => {\n      const gameChoice = choice === 'new' ? true : false;\n      const newState = {\n        newGame: gameChoice\n      };\n      this.setState(newState, () => {\n        this.stepForward();\n      });\n    };\n    this.validateNew = () => {\n      if (this.state.newGame) {\n        return !(this.state.name === '' || this.state.difficulty === '');\n      } else {\n        return !(this.state.name === '') && !(this.state.room === '') && !(this.state.difficulty === '');\n      }\n    };\n    this.validateJoin = () => {\n      if (this.state.newGame) {\n        return !(this.state.name === '');\n      } else {\n        return !(this.state.name === '') && !(this.state.room === '');\n      }\n    };\n    this.onSubmit = () => {\n      this.setState({\n        loading: true\n      });\n      if (this.state.newGame && this.validateNew()) {\n        this.socket.emit('newGame', {\n          difficulty: this.state.difficulty\n        });\n      } else if (this.state.newGame === false && this.validateJoin()) {\n        console.log(this.state.room);\n        this.socket.emit('joining', {\n          room: this.state.room\n        });\n      } else {\n        setTimeout(() => this.setState({\n          loading: false\n        }), 500);\n        this.displayError(this.state.newGame ? 'Please fill out your name and select difficulty' : 'Please fill out your name, room id, and select difficulty');\n      }\n    };\n    this.setDifficulty = diff => {\n      this.setState({\n        difficulty: diff\n      });\n    };\n    this.stepBack = () => {\n      this.setState({\n        step: this.state.step - 1\n      });\n    };\n    this.stepForward = () => {\n      this.setState({\n        step: this.state.step + 1\n      });\n    };\n    this.onTyping = e => {\n      const target = e.target.name;\n      const value = e.target.value;\n      const newState = {\n        [target]: value\n      };\n      this.setState(newState);\n    };\n    this.displayError = message => {\n      this.setState({\n        error: true,\n        errorMessage: message,\n        loading: false\n      });\n      setTimeout(() => {\n        this.setState({\n          error: false,\n          errorMessage: ''\n        });\n      }, 3000);\n    };\n    this.state = {\n      step: 1,\n      name: '',\n      newGame: null,\n      room: '',\n      difficulty: '',\n      loading: false,\n      serverConfirmed: false,\n      error: false,\n      errorMessage: ''\n    };\n  }\n  componentWillUnmount() {\n    this.socket.disconnect();\n  }\n  render() {\n    if (this.state.serverConfirmed) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: `/game?room=${this.state.room}&name=${this.state.name}&difficulty=${this.state.difficulty}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this);\n    } else {\n      switch (this.state.step) {\n        case 1:\n          return /*#__PURE__*/_jsxDEV(Choice, {\n            onChoice: this.onChoice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }, this);\n        case 2:\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loading, {\n              loading: this.state.loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Error, {\n              display: this.state.error,\n              message: this.state.errorMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(InputForm, {\n              stepBack: this.stepBack,\n              onSubmit: this.onSubmit,\n              onTyping: this.onTyping.bind(this),\n              newGame: this.state.newGame,\n              name: this.state.name,\n              setDifficulty: this.setDifficulty,\n              room: this.state.room\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true);\n        default:\n          return null;\n      }\n    }\n  }\n}\nexport default MainMenu;","map":{"version":3,"names":["React","Component","Navigate","InputForm","Choice","Loading","Error","io","jsxDEV","_jsxDEV","Fragment","_Fragment","ENDPOINT","MainMenu","constructor","props","componentDidMount","socket","on","room","difficulty","setState","serverConfirmed","message","displayError","onChoice","choice","gameChoice","newState","newGame","stepForward","validateNew","state","name","validateJoin","onSubmit","loading","emit","console","log","setTimeout","setDifficulty","diff","stepBack","step","onTyping","e","target","value","error","errorMessage","componentWillUnmount","disconnect","render","to","fileName","_jsxFileName","lineNumber","columnNumber","children","display","bind"],"sources":["/Users/win_thanatpong/Desktop/FindMyMines/frontend/src/pages/MainMenu.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Navigate } from 'react-router-dom';\n\nimport InputForm from '../components/InputForm'\nimport Choice from '../components/Choice';\nimport Loading from '../components/Loading';\nimport Error from '../components/Error';\n\nimport io from 'socket.io-client';\nconst ENDPOINT = 'http://localhost:9000/'\n\nclass MainMenu extends Component {\n  constructor(props) {\n    super(props)\n        this.state = {\n            step: 1,\n            name: '',\n            newGame: null,\n            room: '',\n            difficulty: '',\n            loading: false,\n            serverConfirmed: false,\n            error: false,\n            errorMessage: '',\n        };\n  }\n\n  componentDidMount = () => {\n    this.socket = io(ENDPOINT);\n    this.socket.on('newGameCreated', ({room, difficulty}) =>{\n      this.setState({serverConfirmed:true, room:room})\n    });\n    this.socket.on('joinConfirmed', ()=>{\n      this.setState({serverConfirmed:true})\n    });\n    this.socket.on('errorMessage', (message) => this.displayError(message));\n  } \n\n  componentWillUnmount(){\n    this.socket.disconnect()\n  }\n\n  onChoice = (choice)=> {\n    const gameChoice = choice==='new'?true:false\n    const newState = { newGame: gameChoice };\n    this.setState(newState, ()=>{\n        this.stepForward();\n    });\n  }\n\n  validateNew = () => {\n    if (this.state.newGame) {\n        return !(this.state.name === '' || this.state.difficulty === '');\n    } else {\n        return !(this.state.name === '') && !(this.state.room === '') && !(this.state.difficulty === '');\n    }\n  }\n\n  validateJoin = ()=>{\n    if (this.state.newGame){\n        return !(this.state.name==='');\n    } else {\n        return !(this.state.name==='') && !(this.state.room==='');\n    }\n}\n\n  onSubmit = () => {\n    this.setState({ loading: true });\n    if (this.state.newGame && this.validateNew()) {\n      this.socket.emit('newGame', { difficulty: this.state.difficulty });\n    } else if ((this.state.newGame === false) && (this.validateJoin())) {\n      console.log(this.state.room);\n      this.socket.emit('joining', { room: this.state.room });\n    } else {\n      setTimeout(() => this.setState({ loading: false }), 500);\n      this.displayError(this.state.newGame ? 'Please fill out your name and select difficulty' : 'Please fill out your name, room id, and select difficulty');\n    }\n  }\n\n  setDifficulty = (diff) => {\n    this.setState({difficulty: diff});\n  }\n\n  stepBack = ()=>{\n    this.setState({step: this.state.step - 1})\n  }\n\n  stepForward = () =>{\n      this.setState({step: this.state.step + 1})\n  }\n\n  onTyping = (e) => {\n    const target = e.target.name;\n    const value = e.target.value;\n    const newState = { [target]: value };\n    this.setState(newState);\n  }\n\n  displayError = (message) =>{\n    this.setState({error:true, errorMessage:message, loading:false})\n    setTimeout(()=>{\n        this.setState({error:false, errorMessage:''})\n    }, 3000)\n  }\n\n  render(){\n    if (this.state.serverConfirmed){\n        return(\n          <Navigate to={`/game?room=${this.state.room}&name=${this.state.name}&difficulty=${this.state.difficulty}`} />\n        )\n    }else{\n        switch(this.state.step){\n            case(1):\n                return (\n                    <Choice onChoice={this.onChoice}/>\n                );\n            case(2):\n                return (\n                    <>\n                        <Loading loading={this.state.loading}/>\n                        <Error display={this.state.error} message={this.state.errorMessage}/>\n                        <InputForm \n                            stepBack={this.stepBack} \n                            onSubmit={this.onSubmit} \n                            onTyping={this.onTyping.bind(this)}\n                            newGame={this.state.newGame}\n                            name = {this.state.name}\n                            setDifficulty={this.setDifficulty}\n                            room = {this.state.room}/> \n                    </>\n                );\n            default:\n                return null\n        }\n    }\n  }\n\n}\n\nexport default MainMenu;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}