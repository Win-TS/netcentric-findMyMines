{"ast":null,"code":"var _jsxFileName = \"/Users/win_thanatpong/Desktop/FindMyMines/frontend/src/pages/MainMenu.js\";\nimport React, { Component } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport InputForm from '../components/InputForm';\nimport Choice from '../components/Choice';\nimport Loading from '../components/Loading';\nimport Error from '../components/Error';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ENDPOINT = 'http://localhost:9000/';\nclass MainMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.componentDidMount = () => {\n      this.socket = io(ENDPOINT);\n      this.socket.on('newGameCreated', room => {\n        this.setState({\n          serverConfirmed: true,\n          room: room\n        });\n        console.log(this.state);\n      });\n      this.socket.on('joinConfirmed', () => {\n        this.setState({\n          serverConfirmed: true\n        });\n      });\n      this.socket.on('errorMessage', message => this.displayError(message));\n    };\n    this.onChoice = choice => {\n      const gameChoice = choice === 'new' ? true : false;\n      const newState = {\n        newGame: gameChoice\n      };\n      this.setState(newState, () => {\n        this.stepForward();\n      });\n    };\n    this.validate = () => {\n      if (this.state.newGame) {\n        return !(this.state.name === '' || this.state.difficulty === '');\n      } else {\n        return !(this.state.name === '') && !(this.state.room === '') && !(this.state.difficulty === '');\n      }\n    };\n    this.onSubmit = () => {\n      this.setState({\n        loading: true\n      });\n      if (this.validate()) {\n        if (this.state.newGame) {\n          this.socket.emit('newGame', {\n            difficulty: this.state.difficulty\n          });\n        } else {\n          this.socket.emit('joining', {\n            room: this.state.room\n          });\n        }\n      } else {\n        setTimeout(() => this.setState({\n          loading: false\n        }), 500);\n        this.displayError(this.state.newGame ? 'Please fill out your name and select difficulty' : 'Please fill out your name, room id, and select difficulty');\n      }\n    };\n    this.setDifficulty = diff => {\n      this.setState({\n        difficulty: diff\n      });\n    };\n    this.stepBack = () => {\n      this.setState({\n        step: this.state.step - 1\n      });\n    };\n    this.stepForward = () => {\n      this.setState({\n        step: this.state.step + 1\n      });\n    };\n    this.onTyping = e => {\n      const target = e.target.name;\n      const value = e.target.value;\n      const newState = {\n        [target]: value\n      };\n      this.setState(newState);\n    };\n    this.displayError = message => {\n      this.setState({\n        error: true,\n        errorMessage: message,\n        loading: false\n      });\n      setTimeout(() => {\n        this.setState({\n          error: false,\n          errorMessage: ''\n        });\n      }, 3000);\n    };\n    this.state = {\n      step: 1,\n      name: '',\n      newGame: null,\n      room: '',\n      difficulty: '',\n      loading: false,\n      serverConfirmed: false,\n      error: false,\n      errorMessage: ''\n    };\n  }\n  componentWillUnmount() {\n    this.socket.disconnect();\n  }\n  render() {\n    if (this.state.serverConfirmed) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: `/game?room=${this.state.room}&name=${this.state.name}&difficulty=${this.state.difficulty}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this);\n    } else {\n      switch (this.state.step) {\n        case 1:\n          return /*#__PURE__*/_jsxDEV(Choice, {\n            onChoice: this.onChoice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this);\n        case 2:\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loading, {\n              loading: this.state.loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Error, {\n              display: this.state.error,\n              message: this.state.errorMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(InputForm, {\n              stepBack: this.stepBack,\n              onSubmit: this.onSubmit,\n              onTyping: this.onTyping.bind(this),\n              newGame: this.state.newGame,\n              name: this.state.name,\n              setDifficulty: this.setDifficulty,\n              room: this.state.room\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true);\n        default:\n          return null;\n      }\n    }\n  }\n}\nexport default MainMenu;","map":{"version":3,"names":["React","Component","Navigate","InputForm","Choice","Loading","Error","io","jsxDEV","_jsxDEV","Fragment","_Fragment","ENDPOINT","MainMenu","constructor","props","componentDidMount","socket","on","room","setState","serverConfirmed","console","log","state","message","displayError","onChoice","choice","gameChoice","newState","newGame","stepForward","validate","name","difficulty","onSubmit","loading","emit","setTimeout","setDifficulty","diff","stepBack","step","onTyping","e","target","value","error","errorMessage","componentWillUnmount","disconnect","render","to","fileName","_jsxFileName","lineNumber","columnNumber","children","display","bind"],"sources":["/Users/win_thanatpong/Desktop/FindMyMines/frontend/src/pages/MainMenu.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Navigate } from 'react-router-dom';\n\nimport InputForm from '../components/InputForm'\nimport Choice from '../components/Choice';\nimport Loading from '../components/Loading';\nimport Error from '../components/Error';\n\nimport io from 'socket.io-client';\nconst ENDPOINT = 'http://localhost:9000/'\n\nclass MainMenu extends Component {\n  constructor(props) {\n    super(props)\n        this.state = {\n            step: 1,\n            name: '',\n            newGame: null,\n            room: '',\n            difficulty: '',\n            loading: false,\n            serverConfirmed: false,\n            error: false,\n            errorMessage: '',\n        };\n  }\n\n  componentDidMount = () => {\n    this.socket = io(ENDPOINT);\n    this.socket.on('newGameCreated', (room) =>{\n      this.setState({serverConfirmed:true, room:room})\n      console.log(this.state);\n    });\n    this.socket.on('joinConfirmed', ()=>{\n      this.setState({serverConfirmed:true})\n    });\n    this.socket.on('errorMessage', (message) => this.displayError(message));\n  } \n\n  componentWillUnmount(){\n    this.socket.disconnect()\n  }\n\n  onChoice = (choice)=> {\n    const gameChoice = choice==='new'?true:false\n    const newState = { newGame: gameChoice };\n    this.setState(newState, ()=>{\n        this.stepForward()\n    })\n  }\n\n  validate = () => {\n    if (this.state.newGame) {\n        return !(this.state.name === '' || this.state.difficulty === '');\n    } else {\n        return !(this.state.name === '') && !(this.state.room === '') && !(this.state.difficulty === '');\n    }\n  }\n\n  onSubmit = () => {\n    this.setState({ loading: true });\n    if (this.validate()) {\n        if (this.state.newGame) {\n            this.socket.emit('newGame', { difficulty: this.state.difficulty });\n        } else {\n            this.socket.emit('joining', { room: this.state.room });\n        }\n    } else {\n        setTimeout(() => this.setState({ loading: false }), 500);\n        this.displayError(this.state.newGame ? 'Please fill out your name and select difficulty' : 'Please fill out your name, room id, and select difficulty');\n    }\n  }\n\n  setDifficulty = (diff) => {\n    this.setState({difficulty: diff});\n  }\n\n  stepBack = ()=>{\n    this.setState({step: this.state.step - 1})\n  }\n\n  stepForward = () =>{\n      this.setState({step: this.state.step + 1})\n  }\n\n  onTyping = (e) => {\n    const target = e.target.name;\n    const value = e.target.value;\n    const newState = { [target]: value };\n    this.setState(newState);\n  }\n\n  displayError = (message) =>{\n    this.setState({error:true, errorMessage:message, loading:false})\n    setTimeout(()=>{\n        this.setState({error:false, errorMessage:''})\n    }, 3000)\n  }\n\n  render(){\n    if (this.state.serverConfirmed){\n        return(\n          <Navigate to={`/game?room=${this.state.room}&name=${this.state.name}&difficulty=${this.state.difficulty}`} />\n        )\n    }else{\n        switch(this.state.step){\n            case(1):\n                return (\n                    <Choice onChoice={this.onChoice}/>\n                );\n            case(2):\n                return (\n                    <>\n                        <Loading loading={this.state.loading}/>\n                        <Error display={this.state.error} message={this.state.errorMessage}/>\n                        <InputForm \n                            stepBack={this.stepBack} \n                            onSubmit={this.onSubmit} \n                            onTyping={this.onTyping.bind(this)}\n                            newGame={this.state.newGame}\n                            name = {this.state.name}\n                            setDifficulty={this.setDifficulty}\n                            room = {this.state.room}/> \n                    </>\n                );\n            default:\n                return null\n        }\n    }\n  }\n\n}\n\nexport default MainMenu;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}