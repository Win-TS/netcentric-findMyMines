{"ast":null,"code":"import React from \"react\";\nimport io from 'socket.io-client';\nimport qs from 'qs';\nconst ENDPOINT = 'http://localhost:9000/';\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      game: null,\n      firstPlayer: '1',\n      turn: true,\n      end: false,\n      room: '',\n      statusMessage: '',\n      currentPlayerScore: 0,\n      opponentPlayer: [],\n      //State to check when a new user join\n      waiting: false,\n      joinError: false\n    };\n    this.socketID = null;\n  }\n  componentDidMount() {\n    this.socket = io(ENDPOINT);\n    const {\n      room,\n      name,\n      difficulty\n    } = qs.parse(window.location.search, {\n      ignoreQueryPrefix: true\n    });\n    this.setState({\n      room\n    });\n    this.socket.emit('newRoomJoin', {\n      room,\n      name,\n      difficulty\n    });\n\n    //New user join, logic decide on backend whether to display \n    //the actual game or the wait screen or redirect back to the main page\n    this.socket.on('waiting', () => this.setState({\n      waiting: true,\n      currentPlayerScore: 0,\n      opponentPlayer: []\n    }));\n    this.socket.on('starting', ({\n      gameState,\n      players,\n      turn\n    }) => {\n      this.setState({\n        waiting: false\n      });\n      this.gameStart(gameState, players, turn);\n    });\n    this.socket.on('joinError', () => this.setState({\n      joinError: true\n    }));\n\n    //Listening to the assignment of piece store the piece along with the in state\n    //socket id in local socketID variable\n    this.socket.on('pieceAssignment', ({\n      piece,\n      id\n    }) => {\n      this.setState({\n        piece: piece\n      });\n      this.socketID = id;\n    });\n  }\n}\nexport default Game;","map":{"version":3,"names":["React","io","qs","ENDPOINT","Game","Component","constructor","props","state","game","firstPlayer","turn","end","room","statusMessage","currentPlayerScore","opponentPlayer","waiting","joinError","socketID","componentDidMount","socket","name","difficulty","parse","window","location","search","ignoreQueryPrefix","setState","emit","on","gameState","players","gameStart","piece","id"],"sources":["/Users/win_thanatpong/Desktop/FindMyMines/frontend/src/pages/Game.js"],"sourcesContent":["import React from \"react\";\n\nimport io from 'socket.io-client';\nimport qs from 'qs';\nconst ENDPOINT ='http://localhost:9000/'\n\nclass Game extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      game: null,\n      firstPlayer: '1',\n      turn: true,\n      end: false,\n      room: '',\n      statusMessage: '',\n      currentPlayerScore: 0,\n      opponentPlayer: [],\n      //State to check when a new user join\n      waiting: false,\n      joinError: false\n    }\n    this.socketID = null\n  }\n\n  componentDidMount() {\n    this.socket = io(ENDPOINT)\n    const {room, name, difficulty} = qs.parse(window.location.search, {\n      ignoreQueryPrefix: true\n     })\n    this.setState({room})\n    this.socket.emit('newRoomJoin', {room, name, difficulty})\n\n    //New user join, logic decide on backend whether to display \n    //the actual game or the wait screen or redirect back to the main page\n    this.socket.on('waiting', ()=> this.setState({waiting:true, currentPlayerScore:0, opponentPlayer:[]}))\n    this.socket.on('starting', ({gameState, players, turn})=> {\n      this.setState({waiting:false})\n      this.gameStart(gameState, players, turn)\n    })\n    this.socket.on('joinError', () => this.setState({joinError: true}))\n\n    //Listening to the assignment of piece store the piece along with the in state\n    //socket id in local socketID variable\n    this.socket.on('pieceAssignment', ({piece, id}) => {\n      this.setState({piece: piece})\n      this.socketID = id \n    })\n  }\n}\n\nexport default Game;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAOC,EAAE,MAAM,IAAI;AACnB,MAAMC,QAAQ,GAAE,wBAAwB;AAExC,MAAMC,IAAI,SAASJ,KAAK,CAACK,SAAS,CAAC;EACjCC,WAAWA,CAACC,KAAK,EAAC;IAChB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG;MACXC,IAAI,EAAE,IAAI;MACVC,WAAW,EAAE,GAAG;MAChBC,IAAI,EAAE,IAAI;MACVC,GAAG,EAAE,KAAK;MACVC,IAAI,EAAE,EAAE;MACRC,aAAa,EAAE,EAAE;MACjBC,kBAAkB,EAAE,CAAC;MACrBC,cAAc,EAAE,EAAE;MAClB;MACAC,OAAO,EAAE,KAAK;MACdC,SAAS,EAAE;IACb,CAAC;IACD,IAAI,CAACC,QAAQ,GAAG,IAAI;EACtB;EAEAC,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAACC,MAAM,GAAGpB,EAAE,CAACE,QAAQ,CAAC;IAC1B,MAAM;MAACU,IAAI;MAAES,IAAI;MAAEC;IAAU,CAAC,GAAGrB,EAAE,CAACsB,KAAK,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;MAChEC,iBAAiB,EAAE;IACpB,CAAC,CAAC;IACH,IAAI,CAACC,QAAQ,CAAC;MAAChB;IAAI,CAAC,CAAC;IACrB,IAAI,CAACQ,MAAM,CAACS,IAAI,CAAC,aAAa,EAAE;MAACjB,IAAI;MAAES,IAAI;MAAEC;IAAU,CAAC,CAAC;;IAEzD;IACA;IACA,IAAI,CAACF,MAAM,CAACU,EAAE,CAAC,SAAS,EAAE,MAAK,IAAI,CAACF,QAAQ,CAAC;MAACZ,OAAO,EAAC,IAAI;MAAEF,kBAAkB,EAAC,CAAC;MAAEC,cAAc,EAAC;IAAE,CAAC,CAAC,CAAC;IACtG,IAAI,CAACK,MAAM,CAACU,EAAE,CAAC,UAAU,EAAE,CAAC;MAACC,SAAS;MAAEC,OAAO;MAAEtB;IAAI,CAAC,KAAI;MACxD,IAAI,CAACkB,QAAQ,CAAC;QAACZ,OAAO,EAAC;MAAK,CAAC,CAAC;MAC9B,IAAI,CAACiB,SAAS,CAACF,SAAS,EAAEC,OAAO,EAAEtB,IAAI,CAAC;IAC1C,CAAC,CAAC;IACF,IAAI,CAACU,MAAM,CAACU,EAAE,CAAC,WAAW,EAAE,MAAM,IAAI,CAACF,QAAQ,CAAC;MAACX,SAAS,EAAE;IAAI,CAAC,CAAC,CAAC;;IAEnE;IACA;IACA,IAAI,CAACG,MAAM,CAACU,EAAE,CAAC,iBAAiB,EAAE,CAAC;MAACI,KAAK;MAAEC;IAAE,CAAC,KAAK;MACjD,IAAI,CAACP,QAAQ,CAAC;QAACM,KAAK,EAAEA;MAAK,CAAC,CAAC;MAC7B,IAAI,CAAChB,QAAQ,GAAGiB,EAAE;IACpB,CAAC,CAAC;EACJ;AACF;AAEA,eAAehC,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}